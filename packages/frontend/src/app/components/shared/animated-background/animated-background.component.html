<div class="animated-background" [class.card-mode]="hideControls">
  <canvas 
    #canvas 
    class="background-canvas"
    [attr.aria-label]="'Animated background with ' + particleCount + ' interactive particles'"
    role="img">
  </canvas>
  
  <!-- Performance indicator (dev mode) -->
  @if (!hideControls && isAnimating()) {
    <div class="performance-indicator">
      <small>FPS: {{fps()}}</small>
    </div>
  }
</div>

<!-- Performance Control Panel (dev mode - press Ctrl+Alt+D to show) -->
<!-- MOVED OUTSIDE animated-background for maximum visibility -->
@if (!hideControls) {
  <div #perfControls class="performance-controls" 
       [style.display]="showPerformanceControls ? 'block' : 'none'">
    <div class="controls-panel">
      <h4>🎮 Performance Controls</h4>
      <button (click)="logCurrentPerformance()" class="btn-log">📊 Log Performance Now</button>
      <button (click)="resetPerformanceCounters()" class="btn-reset">🔄 Reset Counters</button>
      <button (click)="togglePerformanceControls()" class="btn-close">❌ Close</button>
      <small style="color: #888; margin-top: 10px; display: block;">
        Press Ctrl+Alt+D to toggle
      </small>
    </div>
  </div>
}
